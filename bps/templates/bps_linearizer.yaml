pipelineYaml: "${CP_PIPE_DIR}/pipelines/${INSTRUMENT}/cpLinearizer.yaml#cpLinearizerSolve"

project: "${TICKET}"
campaign: "${TICKET}"
submitPath: "${SCRATCH}/submit/{outputRun}"

# # Necessary to cluster by exposure if there are many input exposures
# clusterAlgorithm: lsst.ctrl.bps.quantum_clustering_funcs.dimension_clustering
# cluster:
#   cpLinearizerIsrByExposure:
#     pipetasks: cpLinearizerIsr
#     dimensions: exposure
#   cpLinearizerPtcExtractPairByExposure:
#     pipetasks: cpLinearizerPtcExtractPair
#     dimensions: exposure

payload:
  payloadName: "${INSTRUMENT}_${TICKET}_linearizer"
  output: "${USER_CALIB_PREFIX}${INSTRUMENT}/calib/${TICKET}/${TAG}/linearizerGen.${RERUN}"
  butlerConfig: "${REPO}"
  inCollection: "LSSTCam/calib/DM-53620/3s_v1_dp2_v2/linearizerGen.20251215a/20251215T225629Z,LSSTCam/calib/DM-53620,LSSTCam/raw/all,LSSTCam/calib/DM-52726,LSSTCam/calib/DM-51599,LSSTCam/calib/DM-51669,LSSTCam/calib/photodiode" # "${USER_CALIB_PREFIX}${INSTRUMENT}/calib/${TICKET},${RAW_COLLECTION},${CALIB_COLLECTIONS}"
  dataQuery: "${SELECTION_PTC_LINEARIZER}"
