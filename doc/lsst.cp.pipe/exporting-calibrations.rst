.. py:currentmodule:: lsst.cp.pipe

.. _cp-pipe-exporting-calibrations

######################
Exporting calibrations
######################

Being able to transfer calibration products produced at one location to another is essential for consistent analysis of the data.  To that end, a `exportCalibs.py` script has been added to simplify the production of a butler export directory.  All :ref:`CHAINED <lsst.daf.butler.CollectionType.CHAINED>` and :ref:`CALIBRATION <lsst.daf.butler.CollectionType.CALIBRATION>` specified on the command line will be checked for the current set of calibration types, and any found will be included in the export dump.

Following the example CHAINED collection generated by the :ref:`Constructing calibrations <_cp-pipe-collection-best-practices>`, we can export all of the calibrations added to the ``u/czw/DM-28920/calib.20210720`` with

.. code:: bash

   exportCalibs.py $BUTLER_REPO ./calibs --collections u/czw/DM-28920/calib.20210720


.. _cp-pipe-importing-calibrations


Importing calibrations
======================

Once the butler export has been generated and transferred to the location of a new repository, it can be imported with

.. code:: bash

   butler import --export-file ./calibs/export.yaml $NEW_BUTLER_REPO ./calibs -s instrument -s detector -s physical_filter


The additional ``-s`` options on this command direct the ingestion to skip the named dimensions, which likely already exist on a operational butler repository.

