description: cp_pipe LATISS linearizer calibration construction.
instrument: lsst.obs.lsst.Latiss
imports:
  - location: $CP_PIPE_DIR/pipelines/_ingredients/cpLinearizerLSST.yaml
    exclude:
      - cpLinearizerUnnormalizedSolve1
      - cpLinearizerNormalize1
      - cpLinearizerUnnormalizedSolve2
      - cpLinearizerNormalize2
tasks:
  cpLinearizerPtcExtractPair:
    class: lsst.cp.pipe.ptc.PhotonTransferCurveExtractPairTask
    config:
      efdSalIndex: 201
      doExtractPhotodiodeData: true
      useEfdPhotodiodeData: false
  # Turn off the normalization because one detector
  # is not enough to run it.
  cpLinearizerSolve:
    class: lsst.cp.pipe.LinearitySolveTask
    config:
      useLinearizerPtc: true
      connections.outputLinearizer: "linearizer"
      linearityType: Spline
      usePhotodiode: false
      useFocalPlaneNormalization: false
      splineFitMaxIter: 40
      splineKnots: 8
      nSigmaClipLinear: 3.0