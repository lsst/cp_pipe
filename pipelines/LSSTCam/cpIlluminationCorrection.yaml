description: cp_pipe LSSTComCam illumination correction calibration construction.
instrument: lsst.obs.lsst.LsstCam
imports:
  - location: $CP_PIPE_DIR/pipelines/_ingredients/cpIlluminationCorrectionLSST.yaml
tasks:
  cpIlluminationCorrectionFgcmFitCycle:
    class: lsst.fgcmcal.fgcmFitCycle.FgcmFitCycleTask
    config:
      multipleCyclesFinalCycleNumber: 7
      aperCorrFitNBins: 0
      maxIterBeforeFinalCycle: 50
      precomputeSuperStarInitialCycle: true
      aperCorrPerCcd: true
      nStarPerRun: 10000
      sigFgcmMaxErr: 0.005
      python: |
        config.refStarColorCuts = ["g, i, 0.4, 1.0",]
  cpIlluminationCorrectionFgcmOutputIlluminationCorrection:
    class: lsst.fgcmcal.fgcmOutputIlluminationCorrection.FgcmOutputIlluminationCorrectionTask
    config:
      connections.cycleNumber: 7
      epoch_time: "2025-05-23"
      physical_filters: ["u_26", "g_6", "r_57", "i_39", "z_20", "y_10"]
